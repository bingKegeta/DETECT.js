---
import ThemeSwitcher from "./ThemeSwitcher";
---

<header
  class="flex justify-between bg-base-200 items-center p-5 text-base-content border-4 border-primary m-4 rounded-lg relative"
>
  <!-- Logo -->
  <div class="bg-primary rounded-full p-4 shadow-lg">
    <h1 class="text-primary-content font-bold text-2xl">DETECT</h1>
  </div>

  <!-- Right-Side Navigation & Settings -->
  <div class="flex items-center gap-6">
    <!-- Navigation Buttons (Adaptive SVG Icons) -->
    <nav class="flex gap-6">
      <a
        href="/"
        class="p-3 transition-transform transform-gpu hover:scale-110"
      >
        <!-- Home Icon -->
        <svg
          class="w-7 h-7 fill-current text-base-content hover:text-primary transition-colors duration-300"
          viewBox="0 0 24 24"
        >
          <path d="M12 3L2 12h3v8h6v-6h2v6h6v-8h3z"></path>
        </svg>
      </a>
      <a
        href="#"
        class="p-3 transition-transform transform-gpu hover:scale-110"
      >
        <!-- About Icon -->
        <svg
          class="w-7 h-7 fill-current text-base-content hover:text-primary transition-colors duration-300"
          viewBox="0 0 24 24"
        >
          <path
            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 15h-2v-2h2v2zm1-4.9c-.58.51-1 .99-1 1.9h-2c0-1.73 1.44-3.02 2.23-3.66.65-.51.77-.99.77-1.34 0-.56-.44-1-1-1s-1 .44-1 1h-2c0-1.66 1.34-3 3-3s3 1.34 3 3c0 1.22-.81 2.01-1.77 2.9z"
          ></path>
        </svg>
      </a>
      <a
        href="#"
        class="p-3 transition-transform transform-gpu hover:scale-110"
      >
        <!-- Upload Icon -->
        <svg
          class="w-7 h-7 fill-current text-base-content hover:text-primary transition-colors duration-300"
          viewBox="0 0 24 24"
        >
          <path d="M5 20h14v-2H5v2zm7-18l-7 7h4v6h6v-6h4l-7-7z"></path>
        </svg>
      </a>
    </nav>

    <!-- Settings Button (SVG Icon) -->
    <button
      id="settings-toggle-btn"
      class="p-3 transition-transform transform-gpu hover:scale-110 cursor-pointer"
    >
      <svg
        class="w-7 h-7 fill-current text-base-content hover:text-primary transition-colors duration-300"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 482.568 482.568"
        xml:space="preserve"
        ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
          id="SVGRepo_tracerCarrier"
          stroke-linecap="round"
          stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier">
          <g>
            <g>
              <path
                d="M116.993,203.218c13.4-1.8,26.8,2.8,36.3,12.3l24,24l22.7-22.6l-32.8-32.7c-5.1-5.1-5.1-13.4,0-18.5s13.4-5.1,18.5,0 l32.8,32.8l22.7-22.6l-24.1-24.1c-9.5-9.5-14.1-23-12.3-36.3c4-30.4-5.7-62.2-29-85.6c-23.8-23.8-56.4-33.4-87.3-28.8 c-4.9,0.7-6.9,6.8-3.4,10.3l30.9,30.9c14.7,14.7,14.7,38.5,0,53.1l-19,19c-14.7,14.7-38.5,14.7-53.1,0l-31-30.9 c-3.5-3.5-9.5-1.5-10.3,3.4c-4.6,30.9,5,63.5,28.8,87.3C54.793,197.518,86.593,207.218,116.993,203.218z"
              ></path>
              <path
                d="M309.193,243.918l-22.7,22.6l134.8,134.8c5.1,5.1,5.1,13.4,0,18.5s-13.4,5.1-18.5,0l-134.8-134.8l-22.7,22.6l138.9,138.9 c17.6,17.6,46.1,17.5,63.7-0.1s17.6-46.1,0.1-63.7L309.193,243.918z"
              ></path>
              <path
                d="M361.293,153.918h59.9l59.9-119.7l-29.9-29.9l-119.8,59.8v59.9l-162.8,162.3l-29.3-29.2l-118,118 c-24.6,24.6-24.6,64.4,0,89s64.4,24.6,89,0l118-118l-29.9-29.9L361.293,153.918z"
              ></path>
            </g>
          </g>
        </g></svg
      >
    </button>
  </div>
</header>

<!-- Dim Background (Initially Hidden) -->
<div
  id="backdrop"
  class="fixed inset-0 bg-black bg-opacity-0 transition-opacity duration-300 pointer-events-none z-40"
>
</div>

<!-- Settings Menu (Improved Readability) -->
<div
  id="settings-menu"
  class="fixed top-0 right-0 h-full w-64 bg-base-300 border-l-4 border-primary shadow-lg transform translate-x-full transition-transform duration-300 z-50 text-primary-content"
>
  <div class="p-5 flex flex-col gap-4">
    <h2 class="text-2xl font-semibold text-white">Settings</h2>

    <!-- Theme Switcher (More Visible) -->
    <div
      class="flex justify-between items-center bg-base-400 p-4 rounded-lg shadow-md text-white"
    >
      <span>Theme</span>
      <ThemeSwitcher client:load />
    </div>

    <!-- Tracking & Analysis Settings (Background Lightened) -->
    <div class="flex flex-col gap-4">
      <label
        class="flex items-center justify-between bg-base-400 p-4 rounded-lg shadow-md text-white"
      >
        Face Normalization
        <input type="checkbox" class="toggle-switch" />
      </label>

      <label
        class="flex items-center justify-between bg-base-400 p-4 rounded-lg shadow-md text-white"
      >
        Real-Time Graphing
        <input type="checkbox" class="toggle-switch" />
      </label>

      <label
        class="flex items-center justify-between bg-base-400 p-4 rounded-lg shadow-md text-white"
      >
        Griddy
        <input type="checkbox" class="toggle-switch" />
      </label>

      <label
        class="flex items-center justify-between bg-base-400 p-4 rounded-lg shadow-md text-white"
      >
        Some stuff
        <input type="checkbox" class="toggle-switch" />
      </label>
    </div>

    <!-- Close Button -->
    <button
      id="settings-close-btn"
      class="mt-4 p-3 text-red-400 transition-transform transform-gpu hover:scale-105 hover:text-red-600 cursor-pointer"
    >
      Close
    </button>
  </div>
</div>

<!-- JavaScript for Menu and Backdrop -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const menu = document.getElementById("settings-menu");
    const openBtn = document.getElementById("settings-toggle-btn");
    const closeBtn = document.getElementById("settings-close-btn");
    const backdrop = document.getElementById("backdrop");

    function openMenu() {
      if (menu) menu.classList.remove("translate-x-full");
      if (backdrop) {
        backdrop.classList.add("pointer-events-auto");
        backdrop.classList.remove("bg-opacity-0");
        backdrop.classList.add("bg-opacity-30");
      }
    }

    function closeMenu() {
      if (menu) menu.classList.add("translate-x-full");
      if (backdrop) {
        backdrop.classList.remove("bg-opacity-30");
        backdrop.classList.add("bg-opacity-0");
        setTimeout(() => backdrop.classList.remove("pointer-events-auto"), 300);
      }
    }

    if (openBtn) openBtn.addEventListener("click", openMenu);
    if (closeBtn) closeBtn.addEventListener("click", closeMenu);

    // Close menu if user clicks outside of it
    if (backdrop) backdrop.addEventListener("click", closeMenu);
  });
</script>

<!-- iPhone-Style Toggle Switch Styling -->
<style>
  .toggle-switch {
    appearance: none;
    width: 50px;
    height: 26px;
    background-color: var(--color-neutral);
    border-radius: 20px;
    position: relative;
    transition: background 0.3s ease-in-out;
    cursor: pointer;
    outline: none;
  }

  .toggle-switch::before {
    content: "";
    position: absolute;
    width: 22px;
    height: 22px;
    background-color: white;
    border-radius: 50%;
    top: 2px;
    left: 2px;
    transition: transform 0.3s ease-in-out;
  }

  .toggle-switch:checked {
    background-color: var(--color-primary);
  }

  .toggle-switch:checked::before {
    transform: translateX(24px);
  }
</style>
